#include "mn28016.h"
#include "string.h"
void MN28016_ClearScreen(void);

const uint8_t LCD_6x8ASCTable[95][6]=
{
//	  (0) !(1) "(2) #(3) $(4) %(5) &(6) '(7) ((8) )(9) *(10) +(11) ,(12) -(13) .(14) /(15)
// 0(16) 1(17) 2(18) 3(19) 4(20) 5(21) 6(22) 7(23) 8(24) 9(25) :(26) ;(27) <(28) =(29) >(30) ?(31)
// @(32) A(33) B(34) C(35) D(36) E(37) F(38) G(39) H(40) I(41) J(42) K(43) L(44) M(45) N(46) O(47)
// P(48) Q(49) R(50) S(51) T(52) U(53) V(54) W(55) X(56) Y(57) Z(58) [(59) \(60) ](61) ^(62) _(63)
// `(64) a(65) b(66) c(67) d(68) e(69) f(70) g(71) h(72) i(73) j(74) k(75) l(76) m(77) n(78) o(79)
// p(80) q(81) r(82) s(83) t(84) u(85) v(86) w(87) x(88) y(89) z(90) {(91) |(92) }(93) ~(94)

{0x00,0x00,0x00,0x00,0x00,0x00},/*" ",0*/
{0x00,0x00,0xFA,0x00,0x00,0x00},/*"!",1*/
{0x00,0xC0,0x00,0xC0,0x00,0x00},/*""",2*/
{0x28,0xFE,0x28,0xFE,0x28,0x00},/*"#",3*/
{0x00,0x32,0x5E,0xF2,0x4C,0x00},/*"$",4*/
{0x00,0x66,0x68,0x16,0x66,0x00},/*"%",5*/
{0x00,0x1C,0xF2,0xB2,0x4C,0x00},/*"&",6*/
{0x00,0x00,0x00,0xC0,0x00,0x00},/*"'",7*/
{0x00,0x00,0x7C,0x82,0x00,0x00},/*"(",8*/
{0x00,0x00,0x82,0x7C,0x00,0x00},/*")",9*/
{0x00,0x38,0x7C,0x38,0x00,0x00},/*"*",10*/
{0x00,0x10,0x7C,0x10,0x00,0x00},/*"+",11*/
{0x00,0x00,0x00,0x06,0x00,0x00},/*",",12*/
{0x00,0x10,0x10,0x10,0x10,0x00},/*"-",13*/
{0x00,0x00,0x02,0x00,0x00,0x00},/*".",14*/
{0x00,0x02,0x0C,0x30,0xC0,0x00},/*"/",15*/
{0x00,0x7C,0x82,0x82,0x7C,0x00},/*"0",16*/
{0x00,0x42,0xFE,0x02,0x00,0x00},/*"1",17*/
{0x00,0x46,0x8A,0x92,0x62,0x00},/*"2",18*/
{0x00,0x44,0x92,0x92,0x6C,0x00},/*"3",19*/
{0x00,0x1C,0x64,0xFE,0x04,0x00},/*"4",20*/
{0x00,0xF2,0x92,0x92,0x8C,0x00},/*"5",21*/
{0x00,0x7C,0x92,0x92,0x4C,0x00},/*"6",22*/
{0x00,0xC0,0x8E,0x90,0xE0,0x00},/*"7",23*/
{0x00,0x6C,0x92,0x92,0x6C,0x00},/*"8",24*/
{0x00,0x64,0x92,0x92,0x7C,0x00},/*"9",25*/
{0x00,0x00,0x24,0x00,0x00,0x00},/*":",26*/
{0x00,0x02,0x24,0x00,0x00,0x00},/*";",27*/
{0x00,0x10,0x28,0x44,0x82,0x00},/*"<",28*/
{0x00,0x28,0x28,0x28,0x28,0x00},/*"=",29*/
{0x00,0x82,0x44,0x28,0x10,0x00},/*">",30*/
{0x00,0x40,0x8A,0x90,0x60,0x00},/*"?",31*/
{0x00,0x70,0x8E,0x92,0x7E,0x00},/*"@",32*/
{0x00,0x7E,0x88,0x88,0x7E,0x00},/*"A",33*/
{0x00,0xFE,0x92,0x92,0x6C,0x00},/*"B",34*/
{0x00,0x7C,0x82,0x82,0x44,0x00},/*"C",35*/
{0x00,0xFE,0x82,0x82,0x7C,0x00},/*"D",36*/
{0x00,0xFE,0x92,0x92,0x82,0x00},/*"E",37*/
{0x00,0xFE,0x90,0x90,0x80,0x00},/*"F",38*/
{0x00,0x7C,0x82,0x92,0x5C,0x00},/*"G",39*/
{0x00,0xFE,0x10,0x10,0xFE,0x00},/*"H",40*/
{0x00,0x82,0xFE,0x82,0x00,0x00},/*"I",41*/
{0x00,0x0C,0x02,0x02,0xFC,0x00},/*"J",42*/
{0x00,0xFE,0x10,0x28,0xC6,0x00},/*"K",43*/
{0x00,0xFE,0x02,0x02,0x02,0x00},/*"L",44*/
{0x00,0xFE,0x60,0x60,0xFE,0x00},/*"M",45*/
{0x00,0xFE,0x60,0x18,0xFE,0x00},/*"N",46*/
{0x00,0xFE,0x82,0x82,0xFE,0x00},/*"O",47*/
{0x00,0xFE,0x90,0x90,0x60,0x00},/*"P",48*/
{0x00,0x7C,0x8A,0x86,0x7E,0x00},/*"Q",49*/
{0x00,0xFE,0x98,0x94,0x62,0x00},/*"R",50*/
{0x00,0x64,0x92,0x92,0x4C,0x00},/*"S",51*/
{0x00,0x80,0xFE,0x80,0x80,0x00},/*"T",52*/
{0x00,0xFC,0x02,0x02,0xFC,0x00},/*"U",53*/
{0x00,0xF0,0x0E,0x0E,0xF0,0x00},/*"V",54*/
{0x00,0xFE,0x0C,0x0C,0xFE,0x00},/*"W",55*/
{0x00,0xC6,0x38,0x38,0xC6,0x00},/*"X",56*/
{0xC0,0x20,0x1E,0x20,0xC0,0x00},/*"Y",57*/
{0x00,0x86,0x9A,0xB2,0xC2,0x00},/*"Z",58*/
{0x00,0x00,0xFE,0x82,0x00,0x00},/*"[",59*/
{0xC0,0x30,0x0C,0x02,0x00,0x00},/*"\",60*/
{0x00,0x00,0x82,0xFE,0x00,0x00},/*"]",61*/
{0x00,0x40,0x80,0x40,0x00,0x00},/*"^",62*/
{0x00,0x02,0x02,0x02,0x02,0x00},/*"_",63*/
{0x00,0x00,0xC0,0x00,0x00,0x00},/*"`",64*/
{0x00,0x04,0x1A,0x1A,0x1E,0x00},/*"a",65*/
{0x00,0xFE,0x12,0x12,0x0C,0x00},/*"b",66*/
{0x00,0x0C,0x12,0x12,0x12,0x00},/*"c",67*/
{0x00,0x0C,0x12,0x12,0xFE,0x00},/*"d",68*/
{0x00,0x0C,0x1A,0x1A,0x08,0x00},/*"e",69*/
{0x00,0x10,0x3E,0x50,0x10,0x00},/*"f",70*/
{0x00,0x08,0x15,0x15,0x1E,0x00},/*"g",71*/
{0x00,0xFE,0x10,0x1E,0x00,0x00},/*"h",72*/
{0x00,0x00,0x2E,0x00,0x00,0x00},/*"i",73*/
{0x00,0x01,0x01,0x2E,0x00,0x00},/*"j",74*/
{0x00,0xFE,0x08,0x14,0x12,0x00},/*"k",75*/
{0x00,0x02,0xFE,0x02,0x00,0x00},/*"l",76*/
{0x00,0x1E,0x10,0x1E,0x1E,0x00},/*"m",77*/
{0x00,0x1E,0x10,0x10,0x0E,0x00},/*"n",78*/
{0x00,0x0C,0x12,0x12,0x0C,0x00},/*"o",79*/
{0x00,0x1F,0x12,0x12,0x0C,0x00},/*"p",80*/
{0x00,0x0C,0x12,0x12,0x1F,0x00},/*"q",81*/
{0x00,0x1E,0x08,0x10,0x10,0x00},/*"r",82*/
{0x00,0x0A,0x1A,0x16,0x14,0x00},/*"s",83*/
{0x00,0x10,0x3E,0x12,0x00,0x00},/*"t",84*/
{0x00,0x1C,0x02,0x02,0x1E,0x00},/*"u",85*/
{0x00,0x18,0x06,0x06,0x18,0x00},/*"v",86*/
{0x18,0x06,0x1C,0x06,0x18,0x00},/*"w",87*/
{0x00,0x12,0x0C,0x0C,0x12,0x00},/*"x",88*/
{0x00,0x18,0x05,0x05,0x1E,0x00},/*"y",89*/
{0x00,0x12,0x16,0x1A,0x12,0x00},/*"z",90*/
{0x00,0x10,0xEE,0x82,0x00,0x00},/*"{",91*/
{0x00,0x00,0xFE,0x00,0x00,0x00},/*"|",92*/
{0x00,0x82,0xEE,0x10,0x00,0x00},/*"}",93*/
{0x00,0x40,0x80,0x40,0x80,0x00},/*"~",94*/
};


const uint8_t LCD_8x16ASCTable[95][16]=
{
//---------------------Fixedsys font		
//	(0) !(1) "(2) #(3) $(4) %(5) &(6) '(7) ((8) )(9) *(10) +(11) ,(12) -(13) .(14) /(15)
//	 0(16) 1(17) 2(18) 3(19) 4(20) 5(21) 6(22) 7(23) 8(24) 9(25) :(26) ;(27) <(28) =(29) >(30) ?(31)
//	 @(32) A(33) B(34) C(35) D(36) E(37) F(38) G(39) H(40) I(41) J(42) K(43) L(44) M(45) N(46) O(47)
//	 P(48) Q(49) R(50) S(51) T(52) U(53) V(54) W(55) X(56) Y(57) Z(58) [(59) \(60) ](61) ^(62) _(63)
//	 `(64) a(65) b(66) c(67) d(68) e(69) f(70) g(71) h(72) i(73) j(74) k(75) l(76) m(77) n(78) o(79)
//	 p(80) q(81) r(82) s(83) t(84) u(85) v(86) w(87) x(88) y(89) z(90) {(91) |(92) }(93) ~(94)

{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*" ",0*/
{0x00,0x00,0x0E,0x1F,0x1F,0x0E,0x00,0x00,0x00,0x00,0x00,0xB0,0xB0,0x00,0x00,0x00},/*"!",1*/
{0x00,0x1C,0x1C,0x00,0x00,0x1C,0x1C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*""",2*/
{0x00,0x04,0x1F,0x1F,0x04,0x1F,0x1F,0x04,0x00,0x40,0xF0,0xF0,0x40,0xF0,0xF0,0x40},/*"#",3*/
{0x00,0x0C,0x1E,0x73,0x71,0x18,0x08,0x00,0x00,0x20,0x30,0x1C,0x9C,0xF0,0x60,0x00},/*"$",4*/
{0x18,0x3C,0x24,0x3D,0x1B,0x06,0x0C,0x00,0x00,0x60,0xC0,0xB0,0x78,0x48,0x78,0x30},/*"%",5*/
{0x00,0x0D,0x1F,0x12,0x1E,0x0C,0x00,0x00,0x00,0xE0,0xF0,0x10,0x90,0xE0,0xF0,0x90},/*"&",6*/
{0x00,0x00,0x00,0x1C,0x1C,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"'",7*/
{0x00,0x00,0x03,0x0F,0x1C,0x10,0x00,0x00,0x00,0x00,0xE0,0xF8,0x1C,0x04,0x00,0x00},/*"(",8*/
{0x00,0x00,0x10,0x1C,0x0F,0x03,0x00,0x00,0x00,0x00,0x04,0x1C,0xF8,0xE0,0x00,0x00},/*")",9*/
{0x00,0x01,0x05,0x07,0x03,0x07,0x05,0x01,0x00,0x00,0x40,0xC0,0x80,0xC0,0x40,0x00},/*"*",10*/
{0x00,0x01,0x01,0x07,0x07,0x01,0x01,0x00,0x00,0x00,0x00,0xC0,0xC0,0x00,0x00,0x00},/*"+",11*/
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x34,0x3C,0x38,0x00,0x00},/*",",12*/
{0x00,0x01,0x01,0x01,0x01,0x01,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"-",13*/
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x30,0x30,0x30,0x00,0x00},/*".",14*/
{0x00,0x00,0x00,0x01,0x07,0x1E,0x18,0x00,0x00,0x18,0x78,0xE0,0x80,0x00,0x00,0x00},/*"/",15*/
{0x00,0x00,0x0F,0x1F,0x10,0x16,0x1F,0x0F,0x00,0x00,0xE0,0xF0,0xD0,0x10,0xF0,0xE0},/*"0",16*/
{0x00,0x04,0x04,0x0C,0x1F,0x1F,0x00,0x00,0x00,0x00,0x00,0x00,0xF0,0xF0,0x00,0x00},/*"1",17*/
{0x00,0x0C,0x1C,0x10,0x11,0x1F,0x0E,0x00,0x00,0x30,0x70,0xD0,0x90,0x10,0x10,0x00},/*"2",18*/
{0x00,0x0C,0x1C,0x11,0x11,0x1F,0x0E,0x00,0x00,0x60,0x70,0x10,0x10,0xF0,0xE0,0x00},/*"3",19*/
{0x00,0x00,0x1F,0x1F,0x00,0x07,0x07,0x00,0x00,0xC0,0xC0,0x40,0x40,0xF0,0xF0,0x40},/*"4",20*/
{0x00,0x1F,0x1F,0x11,0x11,0x11,0x10,0x00,0x00,0x10,0x10,0x10,0x30,0xE0,0xC0,0x00},/*"5",21*/
{0x00,0x03,0x07,0x1E,0x1A,0x13,0x01,0x00,0x00,0xE0,0xF0,0x10,0x10,0xF0,0xE0,0x00},/*"6",22*/
{0x00,0x10,0x10,0x11,0x17,0x1E,0x18,0x00,0x00,0x00,0x70,0xF0,0x80,0x00,0x00,0x00},/*"7",23*/
{0x00,0x0E,0x1F,0x13,0x11,0x1F,0x0E,0x00,0x00,0xE0,0xF0,0x10,0x90,0xF0,0xE0,0x00},/*"8",24*/
{0x00,0x0F,0x1F,0x10,0x10,0x1F,0x0F,0x00,0x00,0x00,0x90,0xB0,0xF0,0xC0,0x80,0x00},/*"9",25*/
{0x00,0x00,0x00,0x06,0x06,0x06,0x00,0x00,0x00,0x00,0x00,0x30,0x30,0x30,0x00,0x00},/*":",26*/
{0x00,0x00,0x00,0x06,0x06,0x06,0x00,0x00,0x00,0x00,0x00,0x34,0x3C,0x38,0x00,0x00},/*";",27*/
{0x00,0x01,0x03,0x06,0x0C,0x18,0x10,0x00,0x00,0x00,0x80,0xC0,0x60,0x30,0x10,0x00},/*"<",28*/
{0x00,0x02,0x02,0x02,0x02,0x02,0x02,0x00,0x00,0x80,0x80,0x80,0x80,0x80,0x80,0x00},/*"=",29*/
{0x00,0x10,0x18,0x0C,0x06,0x03,0x01,0x00,0x00,0x10,0x30,0x60,0xC0,0x80,0x00,0x00},/*">",30*/
{0x00,0x0C,0x1C,0x11,0x13,0x1E,0x0C,0x00,0x00,0x00,0x00,0xB0,0xB0,0x00,0x00,0x00},/*"?",31*/
{0x0F,0x1F,0x10,0x11,0x13,0x12,0x1F,0x0F,0xE0,0xF0,0x10,0x90,0xD0,0x50,0xD0,0xD0},/*"@",32*/
{0x00,0x07,0x0F,0x18,0x18,0x0F,0x07,0x00,0x00,0xF0,0xF0,0x80,0x80,0xF0,0xF0,0x00},/*"A",33*/
{0x00,0x1F,0x1F,0x11,0x11,0x1F,0x0E,0x00,0x00,0xF0,0xF0,0x10,0x10,0xF0,0xE0,0x00},/*"B",34*/
{0x00,0x0F,0x1F,0x10,0x10,0x1C,0x0C,0x00,0x00,0xE0,0xF0,0x10,0x10,0x70,0x60,0x00},/*"C",35*/
{0x00,0x1F,0x1F,0x10,0x18,0x0F,0x07,0x00,0x00,0xF0,0xF0,0x10,0x30,0xE0,0xC0,0x00},/*"D",36*/
{0x00,0x1F,0x1F,0x11,0x11,0x11,0x10,0x00,0x00,0xF0,0xF0,0x10,0x10,0x10,0x10,0x00},/*"E",37*/
{0x00,0x1F,0x1F,0x11,0x11,0x11,0x10,0x00,0x00,0xF0,0xF0,0x00,0x00,0x00,0x00,0x00},/*"F",38*/
{0x00,0x0F,0x1F,0x10,0x10,0x1C,0x0C,0x00,0x00,0xE0,0xF0,0x10,0x90,0xF0,0xF0,0x00},/*"G",39*/
{0x00,0x1F,0x1F,0x01,0x01,0x1F,0x1F,0x00,0x00,0xF0,0xF0,0x00,0x00,0xF0,0xF0,0x00},/*"H",40*/
{0x00,0x00,0x10,0x1F,0x1F,0x10,0x00,0x00,0x00,0x00,0x10,0xF0,0xF0,0x10,0x00,0x00},/*"I",41*/
{0x00,0x00,0x00,0x00,0x00,0x1F,0x1F,0x00,0x00,0x60,0x70,0x10,0x10,0xF0,0xE0,0x00},/*"J",42*/
{0x00,0x1F,0x1F,0x01,0x07,0x1E,0x18,0x00,0x00,0xF0,0xF0,0x00,0xC0,0xF0,0x30,0x00},/*"K",43*/
{0x00,0x1F,0x1F,0x00,0x00,0x00,0x00,0x00,0x00,0xF0,0xF0,0x10,0x10,0x10,0x10,0x00},/*"L",44*/
{0x00,0x1F,0x1F,0x04,0x03,0x04,0x1F,0x1F,0x00,0xF0,0xF0,0x00,0x80,0x00,0xF0,0xF0},/*"M",45*/
{0x00,0x1F,0x1F,0x06,0x03,0x01,0x1F,0x1F,0x00,0xF0,0xF0,0x00,0x00,0x80,0xF0,0xF0},/*"N",46*/
{0x00,0x0F,0x1F,0x10,0x10,0x1F,0x0F,0x00,0x00,0xE0,0xF0,0x10,0x10,0xF0,0xE0,0x00},/*"O",47*/
{0x00,0x1F,0x1F,0x11,0x11,0x1F,0x0E,0x00,0x00,0xF0,0xF0,0x00,0x00,0x00,0x00,0x00},/*"P",48*/
{0x00,0x0F,0x1F,0x10,0x10,0x1F,0x0F,0x00,0x00,0xE0,0xF0,0x10,0x18,0xFC,0xE4,0x00},/*"Q",49*/
{0x00,0x1F,0x1F,0x11,0x11,0x1F,0x0E,0x00,0x00,0xF0,0xF0,0x00,0x80,0xF0,0x70,0x00},/*"R",50*/
{0x00,0x0C,0x1E,0x13,0x11,0x18,0x08,0x00,0x00,0x20,0x30,0x10,0x90,0xF0,0x60,0x00},/*"S",51*/
{0x00,0x10,0x10,0x1F,0x1F,0x10,0x10,0x00,0x00,0x00,0x00,0xF0,0xF0,0x00,0x00,0x00},/*"T",52*/
{0x00,0x1F,0x1F,0x00,0x00,0x1F,0x1F,0x00,0x00,0xE0,0xF0,0x10,0x10,0xF0,0xE0,0x00},/*"U",53*/
{0x00,0x1F,0x1F,0x00,0x00,0x1F,0x1F,0x00,0x00,0xC0,0xE0,0x30,0x30,0xE0,0xC0,0x00},/*"V",54*/
{0x00,0x1F,0x1F,0x00,0x03,0x00,0x1F,0x1F,0x00,0x80,0xF0,0x70,0x80,0x70,0xF0,0x80},/*"W",55*/
{0x00,0x18,0x1C,0x07,0x03,0x1C,0x18,0x00,0x00,0x70,0xF0,0x00,0x80,0xF0,0x70,0x00},/*"X",56*/
{0x00,0x1E,0x1F,0x01,0x01,0x1F,0x1E,0x00,0x00,0x00,0x00,0xF0,0xF0,0x00,0x00,0x00},/*"Y",57*/
{0x00,0x10,0x10,0x11,0x13,0x1E,0x1C,0x00,0x00,0x70,0xF0,0x90,0x10,0x10,0x10,0x00},/*"Z",58*/
{0x00,0x00,0x1F,0x1F,0x10,0x10,0x00,0x00,0x00,0x00,0xFE,0xFE,0x02,0x02,0x00,0x00},/*"[",59*/
{0x00,0x18,0x1E,0x07,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xE0,0x78,0x18,0x00},/*"\",60*/
{0x00,0x00,0x10,0x10,0x1F,0x1F,0x00,0x00,0x00,0x00,0x02,0x02,0xFE,0xFE,0x00,0x00},/*"]",61*/
{0x00,0x10,0x30,0x60,0x60,0x30,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"^",62*/
{0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x02,0x02,0x02,0x02,0x02,0x02,0x02,0x02},/*"_",63*/
{0x00,0x00,0x40,0x60,0x70,0x10,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"`",64*/
{0x00,0x00,0x04,0x04,0x04,0x07,0x03,0x00,0x00,0x60,0xF0,0x90,0x90,0xF0,0xF0,0x00},/*"a",65*/
{0x00,0x1F,0x1F,0x04,0x04,0x07,0x03,0x00,0x00,0xF0,0xF0,0x10,0x10,0xF0,0xE0,0x00},/*"b",66*/
{0x00,0x03,0x07,0x04,0x04,0x06,0x02,0x00,0x00,0xE0,0xF0,0x10,0x10,0x30,0x20,0x00},/*"c",67*/
{0x00,0x03,0x07,0x04,0x04,0x1F,0x1F,0x00,0x00,0xE0,0xF0,0x10,0x10,0xF0,0xF0,0x00},/*"d",68*/
{0x00,0x03,0x07,0x04,0x04,0x07,0x03,0x00,0x00,0xE0,0xF0,0x90,0x90,0x90,0x80,0x00},/*"e",69*/
{0x00,0x01,0x0F,0x1F,0x11,0x11,0x11,0x00,0x00,0x00,0xF0,0xF0,0x00,0x00,0x00,0x00},/*"f",70*/
{0x00,0x03,0x07,0x04,0x04,0x07,0x07,0x00,0x00,0xE2,0xF2,0x12,0x12,0xFE,0xFC,0x00},/*"g",71*/
{0x00,0x1F,0x1F,0x04,0x04,0x07,0x03,0x00,0x00,0xF0,0xF0,0x00,0x00,0xF0,0xF0,0x00},/*"h",72*/
{0x00,0x04,0x04,0x37,0x37,0x00,0x00,0x00,0x00,0x10,0x10,0xF0,0xF0,0x10,0x10,0x00},/*"i",73*/
{0x00,0x00,0x04,0x04,0x37,0x37,0x00,0x00,0x00,0x02,0x02,0x02,0xFE,0xFC,0x00,0x00},/*"j",74*/
{0x00,0x1F,0x1F,0x00,0x01,0x07,0x06,0x00,0x00,0xF0,0xF0,0x80,0xC0,0x70,0x30,0x00},/*"k",75*/
{0x00,0x10,0x10,0x1F,0x1F,0x00,0x00,0x00,0x00,0x10,0x10,0xF0,0xF0,0x10,0x10,0x00},/*"l",76*/
{0x00,0x07,0x07,0x04,0x07,0x04,0x07,0x03,0x00,0xF0,0xF0,0x00,0xE0,0x00,0xF0,0xF0},/*"m",77*/
{0x00,0x07,0x07,0x04,0x04,0x07,0x03,0x00,0x00,0xF0,0xF0,0x00,0x00,0xF0,0xF0,0x00},/*"n",78*/
{0x00,0x03,0x07,0x04,0x04,0x07,0x03,0x00,0x00,0xE0,0xF0,0x10,0x10,0xF0,0xE0,0x00},/*"o",79*/
{0x00,0x07,0x07,0x04,0x04,0x07,0x03,0x00,0x00,0xFE,0xFE,0x10,0x10,0xF0,0xE0,0x00},/*"p",80*/
{0x00,0x03,0x07,0x04,0x04,0x07,0x07,0x00,0x00,0xE0,0xF0,0x10,0x10,0xFE,0xFE,0x00},/*"q",81*/
{0x00,0x07,0x07,0x01,0x02,0x06,0x06,0x00,0x00,0xF0,0xF0,0x00,0x00,0x00,0x00,0x00},/*"r",82*/
{0x00,0x03,0x07,0x04,0x04,0x04,0x04,0x00,0x00,0x10,0x90,0x90,0x90,0xF0,0x60,0x00},/*"s",83*/
{0x00,0x04,0x1F,0x1F,0x04,0x04,0x04,0x00,0x00,0x00,0xE0,0xF0,0x10,0x10,0x10,0x00},/*"t",84*/
{0x00,0x07,0x07,0x00,0x00,0x07,0x07,0x00,0x00,0xE0,0xF0,0x10,0x10,0xF0,0xF0,0x00},/*"u",85*/
{0x00,0x07,0x07,0x00,0x00,0x07,0x07,0x00,0x00,0xC0,0xE0,0x30,0x30,0xE0,0xC0,0x00},/*"v",86*/
{0x00,0x07,0x07,0x00,0x03,0x00,0x07,0x07,0x00,0xC0,0xF0,0x30,0xC0,0x30,0xF0,0xC0},/*"w",87*/
{0x00,0x06,0x07,0x01,0x01,0x07,0x06,0x00,0x00,0x30,0x70,0xC0,0xC0,0x70,0x30,0x00},/*"x",88*/
{0x00,0x07,0x07,0x00,0x00,0x07,0x07,0x00,0x02,0xE2,0xF2,0x16,0x1C,0xF8,0xE0,0x00},/*"y",89*/
{0x00,0x04,0x04,0x04,0x05,0x07,0x06,0x00,0x00,0x30,0x70,0xD0,0x90,0x10,0x10,0x00},/*"z",90*/
{0x00,0x00,0x01,0x0F,0x1E,0x10,0x00,0x00,0x00,0x80,0xC0,0x78,0x3C,0x04,0x00,0x00},/*"{",91*/
{0x00,0x00,0x00,0x1F,0x1F,0x00,0x00,0x00,0x00,0x00,0x00,0xFE,0xFE,0x00,0x00,0x00},/*"|",92*/
{0x00,0x00,0x10,0x1E,0x0F,0x01,0x00,0x00,0x00,0x00,0x04,0x3C,0x78,0xC0,0x80,0x00},/*"}",93*/
{0x0C,0x18,0x10,0x18,0x0C,0x04,0x0C,0x18,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00},/*"~",94*/
};

//---------------------
uint16_t MN28016_RAM[281] = {0};
static uint16_t MN28016_SPI_buf[12] = {0}; //only use 6bit for each byte

FlagStatus PID_UpdateFlag = RESET;
FlagStatus DisplayUpdateFlag = SET;

void MN28016_ClearScreen(void)
{
  uint16_t temp;
  for(temp = 0;temp<281;temp++)
  {
    MN28016_RAM[temp] = 0;
  }
}

void MN28016_Init(void)
{
  GPIO_InitTypeDef GPIO_Type;
  ADC_InitTypeDef ADC_Type;
  SPI_InitTypeDef SPI_Type;
  DMA_InitTypeDef DMA_Type;
  NVIC_InitTypeDef NVIC_Type;

  RCC_AHBPeriphClockCmd(RCC_AHBPeriph_GPIOA,ENABLE);
  RCC_AHBPeriphClockCmd(RCC_AHBPeriph_GPIOB,ENABLE);
  RCC_APB2PeriphClockCmd(RCC_APB2Periph_SYSCFG,ENABLE);
//-------------------Below config for simulated IO mode----------------------    
//  GPIO_Type.GPIO_Mode = GPIO_Mode_OUT;
//  GPIO_Type.GPIO_OType = GPIO_OType_PP;
//  GPIO_Type.GPIO_Pin = MN28016_BLK_PIN;
//  GPIO_Type.GPIO_PuPd = GPIO_PuPd_NOPULL;
//  GPIO_Type.GPIO_Speed = GPIO_Speed_Level_1;
//  
//  GPIO_Init(MN28016_BLK_GPIO,&GPIO_Type); //BLK
//  
//  GPIO_Type.GPIO_Pin = MN28016_SCK_PIN;
//  GPIO_Init(MN28016_SCK_GPIO,&GPIO_Type); //SCK
//  
//  GPIO_Type.GPIO_Pin = MN28016_SDO_PIN; //SDO
//  GPIO_Init(MN28016_SDO_GPIO,&GPIO_Type);
//  
//  GPIO_Type.GPIO_Pin = MN28016_LATCH_PIN;       //LATCH
//  GPIO_Init(MN28016_LATCH_GPIO,&GPIO_Type);
  
  
//-------------------Below config for SPI mode----------------------    
  GPIO_Type.GPIO_Mode = GPIO_Mode_OUT;
  GPIO_Type.GPIO_OType = GPIO_OType_PP;
  GPIO_Type.GPIO_Pin = MN28016_BLK_PIN;
  GPIO_Type.GPIO_PuPd = GPIO_PuPd_NOPULL;
  GPIO_Type.GPIO_Speed = GPIO_Speed_Level_1;
  
  GPIO_Init(MN28016_BLK_GPIO,&GPIO_Type); //BLK

  GPIO_Type.GPIO_Pin = MN28016_LATCH_PIN;       //LATCH
  GPIO_Init(MN28016_LATCH_GPIO,&GPIO_Type);
  RESET_LATCH();
  RESET_BLK();
  
  GPIO_Type.GPIO_Mode = GPIO_Mode_AF;
  GPIO_Type.GPIO_OType = GPIO_OType_PP;
  GPIO_Type.GPIO_PuPd = GPIO_PuPd_NOPULL;
  GPIO_Type.GPIO_Speed = GPIO_Speed_Level_1;
  
  GPIO_Type.GPIO_Pin = MN28016_SDO_PIN;  //MOSI
  GPIO_Init(MN28016_SDO_GPIO,&GPIO_Type);
  
  GPIO_Type.GPIO_Pin = MN28016_SCK_PIN;
  GPIO_Init(MN28016_SCK_GPIO,&GPIO_Type); //SCK
  
  GPIO_PinAFConfig(MN28016_SCK_GPIO, GPIO_PinSource13, GPIO_AF_0); //SPI1 SCK
  GPIO_PinAFConfig(MN28016_SDO_GPIO, GPIO_PinSource15, GPIO_AF_0); //SPI1 MOSI
  
  RCC_APB2PeriphClockCmd(RCC_APB2Periph_SPI1,ENABLE);
  RCC_AHBPeriphClockCmd(RCC_AHBPeriph_DMA1, ENABLE);
  
  SPI_Type.SPI_BaudRatePrescaler = SPI_BaudRatePrescaler_2;
  SPI_Type.SPI_CPHA = SPI_CPHA_1Edge;
  SPI_Type.SPI_CPOL = SPI_CPOL_Low;
  SPI_Type.SPI_CRCPolynomial = 2;
  SPI_Type.SPI_DataSize = SPI_DataSize_16b;
  SPI_Type.SPI_Direction = SPI_Direction_1Line_Tx;
  SPI_Type.SPI_FirstBit = SPI_FirstBit_LSB;
  SPI_Type.SPI_Mode = SPI_Mode_Master;
  SPI_Type.SPI_NSS = SPI_NSS_Soft;
  
  DMA_Type.DMA_BufferSize = 12; //12x16 = 192 bits
  DMA_Type.DMA_DIR = DMA_DIR_PeripheralDST;
  DMA_Type.DMA_M2M = DMA_M2M_Disable;
  DMA_Type.DMA_MemoryBaseAddr = (uint32_t)MN28016_SPI_buf;
  DMA_Type.DMA_MemoryDataSize = DMA_MemoryDataSize_HalfWord;
  DMA_Type.DMA_MemoryInc = DMA_MemoryInc_Enable;
  DMA_Type.DMA_Mode = DMA_Mode_Normal;
  DMA_Type.DMA_PeripheralBaseAddr = 0x4001300C;
  DMA_Type.DMA_PeripheralDataSize = DMA_PeripheralDataSize_HalfWord;
  DMA_Type.DMA_PeripheralInc = DMA_PeripheralInc_Disable;
  DMA_Type.DMA_Priority = DMA_Priority_High;
  
  NVIC_Type.NVIC_IRQChannel = DMA1_Channel2_3_IRQn;
  NVIC_Type.NVIC_IRQChannelCmd = ENABLE;
  NVIC_Type.NVIC_IRQChannelPriority = 5;
  NVIC_Init(&NVIC_Type);
  
  DMA_Init(DMA1_Channel3,&DMA_Type);
  DMA_ITConfig(DMA1_Channel3,DMA_IT_TC,ENABLE);
  DMA_Cmd(DMA1_Channel3,ENABLE);
  
  SPI_Init(SPI1,&SPI_Type);
  SPI_Cmd(SPI1,ENABLE);
  
  
  BOOST_Init();
  FILAMENT_Init();
  
  //---single scan from AIN0 to 1
  RCC_APB2PeriphClockCmd(RCC_APB2Periph_ADC1,ENABLE);
  ADC_Type.ADC_ContinuousConvMode = DISABLE;
  ADC_Type.ADC_DataAlign = ADC_DataAlign_Right;
  ADC_Type.ADC_ExternalTrigConv = ADC_ExternalTrigConv_T1_TRGO;
  ADC_Type.ADC_ExternalTrigConvEdge = ADC_ExternalTrigConvEdge_Rising;
  ADC_Type.ADC_Resolution = ADC_Resolution_12b;
  ADC_Type.ADC_ScanDirection = ADC_ScanDirection_Upward;
  
  ADC_DeInit(ADC1);
  ADC_Init(ADC1,&ADC_Type);
 // ADC_DMACmd(ADC1,ENABLE);
  ADC_Cmd(ADC1,ENABLE);
  
  
  MN28016_ClearScreen();
}

void MN28016_SPI_Refresh(void)
{
  uint8_t *p_data;
  static uint32_t gate_control = 0x00000003;
  uint32_t *p_gate;
  static uint8_t gate_control_cnt = 0;
  static uint8_t gate_index = 0;
  uint16_t ram_adr,data_mask = 0x8000;
  uint8_t cnt,temp = 0;

  
  p_data = (uint8_t *)MN28016_SPI_buf;
  p_gate = (uint32_t *)MN28016_SPI_buf;
  ram_adr = gate_index*3;           //0,1->0 2,3->3
  //write 96 bits pixels under the selected gate
  if(gate_index&0x01) //1,3,5,7,9.... send d,e,f data
  {
    for(cnt = 0;cnt<16;cnt++)   //16 row
    {
      temp = 0;
      if(MN28016_RAM[ram_adr]&data_mask)
      {
        temp |= 0x20;
      }
      if(MN28016_RAM[ram_adr+1]&data_mask)
      {
        temp |= 0x08;
      }
      
      if(MN28016_RAM[ram_adr+2]&data_mask)
      {
        temp |= 0x02;
      }      
      data_mask >>= 1;
      
      switch(cnt)
      {
          case 0:
           // *(p_data) = temp;     //00xxxxxx
          case 4:
           // *(p_data+3) = temp;     //00xxxxxx
          case 8:
           // *(p_data+6) = temp;     //00xxxxxx
          case 12:
           // *(p_data+9) = temp;     //00xxxxxx
            *(p_data+cnt/4*3) = temp;     //00xxxxxx
          break;
          case 1:
             //  *(p_data) |= temp<<6; //xx
            //  *(p_data+1) = temp>>2;//0000xxxx
          case 5:
             //  *(p_data+3) |= temp<<6; //xx
              //  *(p_data+4) = temp>>2;//0000xxxx
          case 9:
             //  *(p_data+6) |= temp<<6; //xx
            //  *(p_data+7) = temp>>2;//0000xxxx
          case 13:
        //  *(p_data+9) |= temp<<6; //xx
        //  *(p_data+10) = temp>>2;//0000xxxx
          
          *(p_data+cnt/4*3) |= temp<<6; //xx
          *(p_data+cnt/4*3+1) = temp>>2;//0000xxxx
          break;
          case 2:
          case 6:
          case 10:
          case 14:
        //  *(p_data+1) |= temp<<4;//
        //  *(p_data+2) = temp>>4;//000000xx
            
          *(p_data+cnt/4*3+1) |= temp<<4;//
          *(p_data+cnt/4*3+2) = temp>>4;//000000xx
          break;
          case 3:
          case 7:
          case 11:
          case 15:
          *(p_data+cnt/4*3+2) |= temp<<2;
          break;
        default:
          break;
      }
    }
  }
  else
  {
    for(cnt = 0;cnt<16;cnt++)   //16 row
    {
      temp = 0;
      if(MN28016_RAM[ram_adr]&data_mask)
      {
        temp |= 0x01;
      }
      if(MN28016_RAM[ram_adr+1]&data_mask)
      {
        temp |= 0x04;
      }
      
      if(MN28016_RAM[ram_adr+2]&data_mask)
      {
        temp |= 0x10;
      }
      data_mask >>= 1;
      
      //----------------fill into the buffer-----------------
      switch(cnt)
      {
          case 0:
          case 4:
          case 8:
          case 12:
         // *(p_data) = temp;     //00xxxxxx
          *(p_data+cnt/4*3) = temp;     //00xxxxxx
          break;
          case 1:
          case 5:
          case 9:
          case 13:
          //*(p_data-1) |= temp<<6; //xx
          //*(p_data+1) = temp>>2;//0000xxxx
          *(p_data+cnt/4*3) |= temp<<6; //xx
          *(p_data+cnt/4*3+1) = temp>>2;//0000xxxx
          break;
          case 2:
          case 6:
          case 10:
          case 14:
          //*(p_data+1) |= temp<<4;//
          //*(p_data+2) = temp>>4;//000000xx
          *(p_data+cnt/4*3+1) |= temp<<4;//
          *(p_data+cnt/4*3+2) = temp>>4;//000000xx
          break;
          case 3:
          case 7:
          case 11:
          case 15:
          //*(p_data+2) |= temp<<2;
          *(p_data+cnt/4*3+2) |= temp<<2;
          break;
        default:
          break;
      }
    }
  }
  gate_index++;
  
  
  if(gate_index == 96)
  {
    gate_index = 0;
  }
  //------------96 bits, each time select two gates---------------------
  *(p_gate+3) = 0; 
  *(p_gate+4) = 0; 
  *(p_gate+5) = 0; 
  
  *(p_gate+3+gate_control_cnt) = gate_control;
  if(gate_control == 0x80000000)
  {
    *(p_gate+3+gate_control_cnt+1) = 0x00000001;
    gate_control_cnt++;
    if(gate_control_cnt == 3)   //3 32bit registers used for gate selection
    {
      gate_control_cnt = 0;
    }
  }
  gate_control <<= 1;
  if(gate_control == 0)
  {
    gate_control = 0x00000003;
  }
  
//  RESET_BLK();
//  RESET_LATCH();
  
  
}

void MN28016_RAM_Put6x8Char(uint16_t x, uint8_t y, char asc)
{
  uint8_t cnt = 0;
  if(asc>=32)
  {
    for(cnt = 0; cnt<6; cnt++)
    {
     
      MN28016_RAM[x+cnt+1] &= ~(0x00ff << y);
      MN28016_RAM[x+cnt+1] |= LCD_6x8ASCTable[asc - 32][cnt] << y;
    }
  }
}

void MN28016_RAM_Put6x8Str(uint16_t x, uint8_t y, char *ptr)
{
	uint8_t length = strlen(ptr);
	while(length--)
	{
		MN28016_RAM_Put6x8Char(x,y,*ptr);
		x+=6;
		ptr++;
	}
	
}

void MN28016_RAM_Put8x16Char(uint16_t x, uint8_t y, char asc)
{
	uint8_t cnt = 0;
        if(asc>=32)
        {
          for(cnt = 0; cnt<8; cnt++)
          {
      
                MN28016_RAM[x+cnt+1] = LCD_8x16ASCTable[asc - 32][cnt];
                MN28016_RAM[x+cnt+1] <<= 8;
                MN28016_RAM[x+cnt+1] |= LCD_8x16ASCTable[asc - 32][cnt+8];
          }
        }
	
}

void MN28016_RAM_Put8x16Str(uint16_t x, uint8_t y, char *ptr)
{
	uint8_t length = strlen(ptr);
	while(length--)
	{
		MN28016_RAM_Put8x16Char(x,y,*ptr);
		x+=8;
		ptr++;
	}
	
}

void MN28016_Refresh(void)
{
  static uint8_t gate_index = 0;
  uint8_t cnt,unit_width;
  uint16_t temp = 0x0001;
  uint8_t dot_offset;
   RESET_LATCH();
   RESET_BLK();
   //----------96
   if(gate_index == 96)
   {
     gate_index = 0;
   }
   
    //write 96 bits pixels under the selected gate
    temp=0x8000;        //Y mirror mode, no mirror mode-->0x0001 shift right
    for(cnt = 0;cnt<16;cnt++)   //16 row
    {
               
       for(unit_width = 0;unit_width<6;unit_width++)
       {
         if(gate_index&0x01)    //2,3 gate, 5,6 gate.... write def dots
         {
           switch(unit_width)
           {
             case 0:
             case 2:
             case 4:
             dot_offset = 10;
             break;
             case 1:    //f
                dot_offset = 5;
             break;
             case 3:    //e
                dot_offset = 4;
             break;
             case 5:    //d
             dot_offset = 3;
             break;
           default:
             break;
           }
         }
         else //1,2 gate, 3,4 gate.... write abc dots
         {
           switch(unit_width)
           {
             case 0:      //a
             dot_offset = 0;   //treat as no display
             break;
             case 2:    //b
             dot_offset = 1;
             break;
             case 4:    //c
             dot_offset = 2;
             break;
             case 3:    //e
             case 1:    //f  
             case 5:    //d
             dot_offset = 10;
             break;
           default:
             break;
           }
         }
          RESET_SCK();
          if((dot_offset!=10) && (MN28016_RAM[(gate_index/2)*6+dot_offset] & temp))
          {
            SET_SDO();
          }
          else
          {
            RESET_SDO();
          }
          
          SET_SCK();
       }
       temp >>=1;
    
    }  
    
    //write 96 bit gate selector
    for(cnt = 0;cnt<96;cnt++)
    {
       RESET_SCK();
      if((cnt == gate_index) || (cnt == gate_index+1))
      {
        SET_SDO();
      }
      else
      {
        RESET_SDO();
      }
      SET_SCK();
      
    }
    
     //--------gate sync pulse
    SET_BLK();
    gate_index++;
    SET_LATCH();
  
   
}



//x 1 - 280
//y 1 - 16
void MN28016_WritePixel(uint16_t x,uint8_t y,uint8_t data)
{
  uint16_t temp;
  temp = MN28016_RAM[x+1];
  if(data)
  {
    temp |= 0x0001<<y-1;
  }
  else
  {
    temp &= ~(0x0001<<y-1);
  }
  MN28016_RAM[x+1] = temp;
}

//------------X1 need < X2----------------------------------------
void MN28016_DrawLine(uint16_t x1, uint8_t y1, uint16_t x2, uint8_t y2)
{
	float deltax,deltay = 0;
	float slope;
	deltax = x2-x1;
	deltay = y2-y1;
	slope = deltay/deltax;
	deltay = y1;
	if(deltax < 0)
	{
		deltax = -deltax;
	}
	while(deltax--)
	{
		MN28016_WritePixel(x1, (char)(deltay + slope*x1),1);
		x1++;
	}
}

void TIM1_UPD_ISR(void)
{
 // TIM1_SetCompare3(BoostVoltagePWM);
 
  //
  //TIM1_SetCompare4(BoostVoltagePWM);
}
// TIM4 trigerred
void ADC_ISR(void)
{
  //  BoostVoltage = ADC1_GetBufferValue(3);
   // FilamentCurrent = ADC1_GetBufferValue(4);
}
